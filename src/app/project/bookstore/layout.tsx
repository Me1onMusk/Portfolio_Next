
import SearchBar from "@/components/bookstore/searchbar";
import Link from "next/link"; 
import { ReactNode } from "react";
import type { Metadata } from "next";
import { BookData } from "../../../../types";

// λ©”νƒ€ λ°μ΄ν„° // 
export const metadata: Metadata = {
    title: "ν•μ… λ¶μ¤",
    description: "Generated by create next app"
}; 

// ν—¤λ” // 
function Header() {
    return(
        <header className='flex w-1/4 text-3xl font-bold justify-start items-center'>
            <Link href={'/project/bookstore'}>π“μ„μ </Link>
        </header>
    );
};

// ν‘Έν„° //
async function Footer() {
    const response = await fetch(`${process.env.NEXT_PUBLIC_API_SERVER_URL}/book`);
    if(!response.ok) return <div>μ μ‘ @Kim</div>
    const books : BookData[] = await response.json();
    const bookCount = books.length;
    
    return(
        <footer className="text-sm">
            <div>μ μ‘ @κΉ€νƒμ</div>
            <div>{ bookCount }κ°μ λ„μ„κ°€ λ“±λ΅λμ–΄ μμµλ‹λ‹¤.</div>
        </footer>
    );
};

export default function Page({children, modal}: Readonly<{children: ReactNode; modal: ReactNode;}>) {
    return (
        <div className="container mx-auto flex flex-col items-center justify-center gap-5">
            <Header />
            <main className="flex w-1/4 border">
                { children }
            </main>
            <Footer />
            { modal }
        </div>
    );
};